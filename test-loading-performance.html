<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>STORY-025: ë¡œë”© ì„±ëŠ¥ í…ŒìŠ¤íŠ¸</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background: #f5f5f5;
    }
    h1 {
      color: #333;
      border-bottom: 3px solid #007bff;
      padding-bottom: 10px;
    }
    .test-section {
      background: white;
      padding: 20px;
      margin: 20px 0;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .test-section h2 {
      margin-top: 0;
      color: #007bff;
    }
    .ac-item {
      margin: 10px 0;
      padding: 10px;
      border-left: 4px solid #28a745;
      background: #f8f9fa;
    }
    .ac-item.fail {
      border-left-color: #dc3545;
    }
    .metric {
      display: inline-block;
      margin: 10px 20px 10px 0;
      padding: 10px 15px;
      background: #007bff;
      color: white;
      border-radius: 4px;
      font-weight: bold;
    }
    .metric.good {
      background: #28a745;
    }
    .metric.warn {
      background: #ffc107;
      color: #333;
    }
    .metric.fail {
      background: #dc3545;
    }
    button {
      background: #007bff;
      color: white;
      border: none;
      padding: 10px 20px;
      margin: 5px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
    }
    button:hover {
      background: #0056b3;
    }
    pre {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 4px;
      overflow-x: auto;
      border-left: 4px solid #007bff;
    }
  </style>
</head>
<body>
  <h1>ğŸš€ STORY-025: ë¡œë”© ìµœì í™” ë° ë¡œë”© í™”ë©´ - ì„±ëŠ¥ í…ŒìŠ¤íŠ¸</h1>

  <div class="test-section">
    <h2>ğŸ“Š ì‹¤ì‹œê°„ ì„±ëŠ¥ ë©”íŠ¸ë¦­</h2>
    <div id="metrics">
      <div class="metric" id="total-time">ì´ ë¡œë”© ì‹œê°„: ì¸¡ì • ì¤‘...</div>
      <div class="metric" id="component-count">ë¡œë”©ëœ ì»´í¬ë„ŒíŠ¸: 0/5</div>
      <div class="metric" id="avg-time">í‰ê·  ë¡œë”© ì‹œê°„: -</div>
      <div class="metric" id="max-time">ìµœëŒ€ ë¡œë”© ì‹œê°„: -</div>
    </div>
  </div>

  <div class="test-section">
    <h2>âœ… Acceptance Criteria ê²€ì¦</h2>
    <div id="ac-results">
      <div class="ac-item" id="ac1">
        <strong>AC1:</strong> ëª¨ë“  ì»´í¬ë„ŒíŠ¸ ì´ˆê¸° ë¡œë”© ì™„ë£Œ: 3ì´ˆ ì´ë‚´
        <span id="ac1-result">â³ ì¸¡ì • ì¤‘...</span>
      </div>
      <div class="ac-item" id="ac2">
        <strong>AC2:</strong> ë¡œë”© í™”ë©´ í‘œì‹œ (ìŠ¤í”¼ë„ˆ, configë¡œ ì„¤ì •)
        <span id="ac2-result">â³ ì¸¡ì • ì¤‘...</span>
      </div>
      <div class="ac-item" id="ac3">
        <strong>AC3:</strong> ì»´í¬ë„ŒíŠ¸ ê°œë³„ ë¡œë”© ì‹œê°„: ê° 500ms ì´ë‚´
        <span id="ac3-result">â³ ì¸¡ì • ì¤‘...</span>
      </div>
      <div class="ac-item" id="ac4">
        <strong>AC4:</strong> Lighthouse Performance ì ìˆ˜: 90 ì´ìƒ
        <span id="ac4-result">âš ï¸ ìˆ˜ë™ ì¸¡ì • í•„ìš” (ì•„ë˜ ë²„íŠ¼ í´ë¦­)</span>
      </div>
    </div>
  </div>

  <div class="test-section">
    <h2>ğŸ“‹ ì»´í¬ë„ŒíŠ¸ ë¡œë”© ìƒì„¸</h2>
    <div id="component-details">
      <pre id="details-output">ë¡œë”© ì¤‘...</pre>
    </div>
  </div>

  <div class="test-section">
    <h2>ğŸ§ª ì•¡ì…˜</h2>
    <button onclick="runLighthouseTest()">ğŸ” Lighthouse í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ</button>
    <button onclick="reloadPage()">ğŸ”„ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨</button>
    <button onclick="viewPerformanceData()">ğŸ“Š ì„±ëŠ¥ ë°ì´í„° ë³´ê¸°</button>
  </div>

  <!-- Config ì„¤ì • -->
  <script>
    window.CONFIG = {
      meta: {
        siteName: 'STORY-025 í…ŒìŠ¤íŠ¸',
        version: '1.0.0',
        lastUpdated: '2026-01-02'
      },
      // ëª¨ë“  ì»´í¬ë„ŒíŠ¸ í™œì„±í™”
      header: {
        logo: {
          url: 'https://via.placeholder.com/150',
          alt: 'í…ŒìŠ¤íŠ¸ ë¡œê³ '
        },
        pageType: 'onepage',
        menu: [
          { text: 'ë©”ë‰´1', target: '#section1' }
        ],
        mobile: { breakpoint: 768, hamburgerPosition: 'right' },
        styles: { bgColor: '#ffffff', textColor: '#333333', hoverColor: '#007bff' }
      },
      footer: {
        line1: { siteName: 'í…ŒìŠ¤íŠ¸ í˜„ì¥', phone: '1588-0000' },
        line2: { company: '100zoad', ceo: 'í…ŒìŠ¤íŠ¸', phone: '02-1234-5678', businessNumber: '123-45-67890' },
        legal: { termsUrl: '#', privacyUrl: '#', openIn: 'popup' },
        styles: { bgColor: '#f8f9fa', textColor: '#666666' }
      },
      form: {
        displayMode: 'section',
        fields: {
          name: { label: 'ì´ë¦„', placeholder: 'í™ê¸¸ë™', required: true },
          phone: { label: 'ì „í™”ë²ˆí˜¸', placeholder: '010-0000-0000', required: true },
          additional: []
        },
        legal: { termsText: 'ì•½ê´€...', privacyText: 'ê°œì¸ì •ë³´...' },
        messages: { success: 'ì„±ê³µ!', error: 'ì˜¤ë¥˜!' },
        airtable: { workerUrl: 'https://test.workers.dev/submit' },
        styles: { bgColor: '#ffffff', textColor: '#333333', primaryColor: '#007bff' }
      },
      quickMenu: {
        enabled: true,
        position: { right: '30px', top: '50%' },
        buttons: [
          { text: 'ì…ë ¥í¼', icon: 'ğŸ“', action: 'openForm', color: '#007bff' }
        ]
      },
      mobileNav: {
        enabled: true,
        buttons: [
          { text: 'ìƒë‹´ì‹ ì²­', icon: 'ğŸ“', action: 'openForm', color: '#007bff' }
        ]
      },
      loader: {
        spinnerType: 'circle', // 'circle' | 'bars' | 'dots'
        bgColor: 'rgba(255, 255, 255, 0.95)',
        primaryColor: '#007bff',
        textColor: '#333333',
        showProgress: true
      },
      debug: true
    };

    // ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
    let performanceStartTime = performance.now();

    // ì»´í¬ë„ŒíŠ¸ ë¡œë”© ì™„ë£Œ ê°ì§€
    window.addEventListener('load', () => {
      setTimeout(() => {
        checkLoadingComplete();
      }, 1000);
    });

    function checkLoadingComplete() {
      const perfData = window.__ZOAD_PERFORMANCE__;

      if (!perfData) {
        console.warn('âš ï¸ ì„±ëŠ¥ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        document.getElementById('details-output').textContent = 'ì„±ëŠ¥ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ì„¸ìš”.';
        return;
      }

      const { results, totalTime } = perfData;
      const totalSeconds = totalTime / 1000;

      // ë©”íŠ¸ë¦­ ì—…ë°ì´íŠ¸
      const totalTimeEl = document.getElementById('total-time');
      totalTimeEl.textContent = `ì´ ë¡œë”© ì‹œê°„: ${totalSeconds.toFixed(2)}s`;
      totalTimeEl.className = 'metric ' + (totalSeconds <= 3 ? 'good' : 'fail');

      const successCount = results.filter(r => r.success).length;
      const componentCountEl = document.getElementById('component-count');
      componentCountEl.textContent = `ë¡œë”©ëœ ì»´í¬ë„ŒíŠ¸: ${successCount}/${results.length}`;
      componentCountEl.className = 'metric ' + (successCount === results.length ? 'good' : 'warn');

      const avgTime = results.reduce((sum, r) => sum + r.loadTime, 0) / results.length;
      const avgTimeEl = document.getElementById('avg-time');
      avgTimeEl.textContent = `í‰ê·  ë¡œë”© ì‹œê°„: ${avgTime.toFixed(2)}ms`;
      avgTimeEl.className = 'metric ' + (avgTime <= 500 ? 'good' : 'warn');

      const maxTime = Math.max(...results.map(r => r.loadTime));
      const maxTimeEl = document.getElementById('max-time');
      maxTimeEl.textContent = `ìµœëŒ€ ë¡œë”© ì‹œê°„: ${maxTime.toFixed(2)}ms`;
      maxTimeEl.className = 'metric ' + (maxTime <= 500 ? 'good' : 'warn');

      // AC ê²€ì¦
      const ac1 = totalSeconds <= 3;
      const ac1El = document.getElementById('ac1');
      document.getElementById('ac1-result').textContent = ac1 ? 'âœ… í†µê³¼' : 'âŒ ì‹¤íŒ¨';
      ac1El.className = 'ac-item ' + (ac1 ? '' : 'fail');

      const ac2 = document.querySelector('zoad-loader') !== null;
      const ac2El = document.getElementById('ac2');
      document.getElementById('ac2-result').textContent = ac2 ? 'âœ… í‘œì‹œë¨ (ì´ë¯¸ ìˆ¨ê¹€)' : 'âŒ ë¯¸í‘œì‹œ';
      ac2El.className = 'ac-item ' + (ac2 ? '' : 'fail');

      const ac3 = results.every(r => r.loadTime <= 500);
      const ac3El = document.getElementById('ac3');
      document.getElementById('ac3-result').textContent = ac3 ? 'âœ… í†µê³¼' : 'âš ï¸ ì¼ë¶€ ì´ˆê³¼';
      ac3El.className = 'ac-item ' + (ac3 ? '' : 'fail');

      // ìƒì„¸ ì •ë³´
      const detailsOutput = document.getElementById('details-output');
      let details = `ì´ ë¡œë”© ì‹œê°„: ${totalSeconds.toFixed(2)}s\n\n`;
      details += `ì»´í¬ë„ŒíŠ¸ë³„ ë¡œë”© ì‹œê°„:\n\n`;

      results.forEach(r => {
        const status = r.success ? 'âœ…' : 'âŒ';
        const time500 = r.loadTime <= 500 ? 'âœ…' : 'âš ï¸';
        details += `  ${status} ${r.name.padEnd(12)} ${r.loadTime.toFixed(2).padStart(7)}ms ${time500}\n`;
      });

      details += `\n\nAC ê²€ì¦ ê²°ê³¼:\n`;
      details += `  ${ac1 ? 'âœ…' : 'âŒ'} AC1: 3ì´ˆ ì´ë‚´ ë¡œë”© (${totalSeconds.toFixed(2)}s)\n`;
      details += `  ${ac2 ? 'âœ…' : 'âŒ'} AC2: ë¡œë”© í™”ë©´ í‘œì‹œ\n`;
      details += `  ${ac3 ? 'âœ…' : 'âš ï¸'} AC3: ê°œë³„ 500ms ì´ë‚´\n`;
      details += `  âš ï¸  AC4: Lighthouse ìˆ˜ë™ ì¸¡ì • í•„ìš”\n`;

      detailsOutput.textContent = details;
    }

    function runLighthouseTest() {
      alert(
        'Lighthouse í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ:\n\n' +
        '1. Chrome DevTools ì—´ê¸° (F12)\n' +
        '2. "Lighthouse" íƒ­ ì„ íƒ\n' +
        '3. "Performance" ì²´í¬\n' +
        '4. "Analyze page load" í´ë¦­\n' +
        '5. Performance ì ìˆ˜ í™•ì¸ (90ì  ì´ìƒ ëª©í‘œ)\n\n' +
        'ë˜ëŠ” í˜ì´ì§€ì—ì„œ ìš°í´ë¦­ â†’ "ê²€ì‚¬" â†’ "Lighthouse" íƒ­'
      );
    }

    function reloadPage() {
      location.reload();
    }

    function viewPerformanceData() {
      console.log('=== ì„±ëŠ¥ ë°ì´í„° ===');
      console.log(window.__ZOAD_PERFORMANCE__);
      console.table(window.__ZOAD_PERFORMANCE__?.results);
      alert('ì½˜ì†”(F12)ì—ì„œ ì„±ëŠ¥ ë°ì´í„°ë¥¼ í™•ì¸í•˜ì„¸ìš”!');
    }
  </script>

  <!-- ì»´í¬ë„ŒíŠ¸ ë°°ì¹˜ -->
  <zoad-header></zoad-header>

  <div style="min-height: 300px; padding: 40px 20px; text-align: center;">
    <h2>ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ ì˜ì—­</h2>
    <p>ëª¨ë“  ì»´í¬ë„ŒíŠ¸ê°€ ì •ìƒì ìœ¼ë¡œ ë¡œë“œë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.</p>
  </div>

  <zoad-form></zoad-form>
  <zoad-quickmenu></zoad-quickmenu>
  <zoad-mobile-nav></zoad-mobile-nav>
  <zoad-footer></zoad-footer>

  <!-- Main.js ë¡œë“œ -->
  <script type="module" src="/src/main.js"></script>
</body>
</html>
